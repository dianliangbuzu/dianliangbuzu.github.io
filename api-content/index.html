{"posts":[{"title":"ESLint 快速上手指北","content":"什么是ESLint？ ESLint是一个用来识别 ECMAScript 并且按照规则给出报告的代码检测工具，使用它可以避免低级错误和统一代码的风格。如果每次在代码提交之前都进行一次eslint代码检查，就不会因为某个字段未定义为undefined或null这样的错误而导致服务崩溃，可以有效的控制项目代码的质量 为什么要使用ESlint? 俗话说的好没有规矩不成方圆 代码规范是程序员的根本，入门第一步，从规范代码开始。 eslint根本目的是统一项目的代码风格规范，养成规范的写代码习惯，减少不必要的错误和隐患。 开箱 全局安装 npm install -g eslint 如果你想你所有项目都使用eslint，请全局安装 项目安装 npm install --save-dev eslint 使用 项目根目录新建.eslintrc.js文件 配置eslint。 如果全局安装eslint可以在项目运行, 初始化配置文件。 可以根据个人喜好或团队选择 eslint --init 1 How would you like to use ESLint? (Use arrow keys) To check syntax only // 只检查语法 ❯ To check syntax and find problems // 检查语法并找出问题 To check syntax, find problems, and enforce code style // 检查语法、发现问题并强制执行代码样式 2 What type of modules does your project use? (Use arrow keys) ❯ JavaScript modules (import/export) CommonJS (require/exports) None of these 3 Which framework does your project use? React Vue.js ❯ None of these ... 初始化配置如下 module.exports = { &quot;env&quot;: { &quot;browser&quot;: true, &quot;es6&quot;: true }, &quot;extends&quot;: &quot;eslint:recommended&quot;, &quot;globals&quot;: { &quot;Atomics&quot;: &quot;readonly&quot;, &quot;SharedArrayBuffer&quot;: &quot;readonly&quot; }, &quot;parserOptions&quot;: { &quot;ecmaVersion&quot;: 2018 }, &quot;rules&quot;: { } }; 接下来添加一条rule &quot;rules&quot;: { // if while function 后面的{ 必须与if在同一行。 &quot;brace-style&quot;: [2, &quot;1tbs&quot;, { &quot;allowSingleLine&quot;: true }], } 测试文件: util.js var d = new Date() var time = d.getHours() if (time&lt;10) { document.write(&quot;&lt;b&gt;Good morning&lt;/b&gt;&quot; ) } else if (time&gt;=10 &amp;&amp; time&lt;16) { document.write(&quot;&lt;b&gt;Good day&lt;/b&gt;&quot;) } else { document.write(&quot;&lt;b&gt;Hello World!&lt;/b&gt;&quot;) } 控制台执行 eslint src/util.js eslint rule生效 结果自然是会报错 在当前场景大括号不能单独占一行 ...src/util.js 4:1 error Opening curly brace does not appear on the same line as controlling statement brace-style 6:1 error Closing curly brace does not appear on the same line as the subsequent block brace-style 9:1 error Closing curly brace does not appear on the same line as the subsequent block brace-style 11:1 error Opening curly brace does not appear on the same line as controlling statement brace-style ✖ 4 problems (4 errors, 0 warnings) 4 errors and 0 warnings potentially fixable with the `--fix` option. 这时我们可以执行 eslint --fix package中配置命令替代单个eslint --fix eslint --fix util.js // 自行纠正 // 配置命令全局执行,省事 // package.js &quot;scripts&quot;: { &quot;eslint-fix&quot;: &quot;eslint src/**/*.* --fix&quot; } 接下来在新建一个vue文件 src/index.vue 控制台执行 npm run eslint-fix 出现报错 eslint此时不认识vue文件, 所以只能当成js文件进行处理, 正因为js外层不能包含html标记 所以会出现报错信息。 如何在Vue或React中使用EsLint? vue或react都有对应的插件实现 eslint-plugin-vue eslint-plugin-react 由于 Vue 中的单个文件组件不是普通的 JavaScript，因此无法使用默认解析器，因此引入了新的文件组件。 通过表示模板语法的特定部分以及标签内的内容生成增强的 AST 节点。 以上面Vue文件报错为例子 我们可以通过eslint-plugin-vue来实现 首先项目根目录安装 npm install --save-dev eslint eslint-plugin-vue 然后执行 npm run eslint-fix进行校验 前面所遇到的html标记已经得到解决 eslint能正确识别vue文件。 配合IDE食用更佳 在实际的开发过程中, 当然希望编辑器能即使反馈错误并提示 以VsCode为例 安装插件 预期效果 如果未生效 请确保EsLint开启 如遇报错 解决报错直至开启 ","link":"https://llllchyi.github.io/eslint-kuai-su-shang-shou-zhi-bei/"},{"title":"Electron 启动动画","content":"Electron是通过Chromium和Node.js集成来达到这一开发体验的, 我们可以用React / Vue 很轻松的搭建一个桌面应用程序。应用启动时就避免不了短暂的白屏或者需要启动时加载基础数据。 那么怎样解决这一问题呢? 有APP开发经验的同学肯定立马就想到了 启动动画(开屏广告)。 思路 1.隐藏主窗口, 展示loading窗口 2.主窗口加载完毕 3.ipcRenderer 通知主窗口显示, loading窗口关闭 配置主进程main.js文件 主窗口 show 设置false 隐藏该窗口 const createWindow = async () =&gt; { mainWindow = new BrowserWindow({ minHeight: 600, minWidth: 1024, width: 1280, height: 720, titleBarStyle: 'hidden', frame: false, show: false }); …… }; 创建loading窗口 // loading const createLoadingWindow = async () =&gt; { loadingWindow = new BrowserWindow({ height: 260, width: 650, show: true, transparent: true, // 透明窗口 maximizable: false, //禁止双击放大 frame: false // 去掉顶部操作栏 }) loadingWindow.loadURL(url.format({ // loading.html 加载动画 pathname: path.join(__dirname, './lib/loading/loading.html'), protocol: 'file:', slashes: true })) …… } 动画展示隐藏 import { ipcRenderer } from &quot;electron&quot;; const ipcMain = require('electron').ipcMain; // 页面加载完毕时调用 通知关闭loading ipcRenderer.send(&quot;close-loading-window&quot;); app.on('ready', () =&gt; { // 创建加载动画 createLoadingWindow(); // 创建主窗口 createWindow(); // 监听页面加载完毕事件 ipcMain.on('close-loading-window', () =&gt; { if(loadingWindow) { loadingWindow.close(); } mainWindow.show(); }) }); 效果预览 大功告成🎉 不足 transparent: true, // 透明窗口 在win7下不起作用 解决方案: 禁用硬件加速(未尝试) https://github.com/electron/electron/issues/2170#ref-issue-623539865 app.disableHardwareAcceleration(); app.on('ready', () =&gt; { setTimeout(() =&gt; { createWindow(); autoUpdater.checkForUpdatesAndNotify(); createMenu(); }, 50); }); ","link":"https://llllchyi.github.io/electron-qi-dong-dong-hua/"},{"title":"Cordova - 打包IOS APP","content":"前言 公司使用vue开发的h5应用, 目前已经上线了Android端。 由于市场的需要公众号端已经没法满足用户的需求。 了解现在前端打包的方案。但是最终还是选择了Cordova(当然是因为以前用过🐝) 概述 Apache Cordova是一个开源的移动开发框架。允许你用标准的web技术-HTML5,CSS3和JavaScript做跨平台开发。 应用在每个平台的具体执行被封装了起来，并依靠符合标准的API绑定去访问每个设备的功能，比如说：传感器、数据、网络状态等。 使用Apache Cordova的人群: 移动应用开发者，想扩展一个应用的使用平台，而不通过每个平台的语言和工具集重新实现。 web开发者，想包装部署自己的web App将其分发到各个应用商店门户。 移动应用开发者，有兴趣混合原生应用组建和一个WebView(一个特别的浏览器窗口) 可以接触设备A级PI，或者你想开发一个原生和WebView组件之间的插件接口。 开始 1.NPM安装Cordova npm install -g cordova 2.创建项目 cordova create MyApp 项目目录结构 MyApp/ |-- hooks/ 脚本代码, 用来自定义 Cordova CLI 命令 |-- platforms/ 平台源码 |-- plugins/ 提供javascript接口能够访问例如照相机和电池状态相关的事项。 | |--cordova-plugin-whitelist/ | |--browser.json | |--fetch.json | |--ios.json |-- res/ | |--icon/ | |--screen/ |-- www/ HTML, JavaScript 和 CSS 文件 |-- config.xml 在 config.xml 中定义的东西应该适应所有平台 3.打包Vue项目 获取build后的 dist文件 复制dist中文件, 替换www文件 4.添加平台(ios) cd MyApp cordova platform add ios 5.打包ios cordova build ios 打包完成后 打开cordova目录 找到xcodeproj 用Xcode打开 然后就可以要模拟器打开了或者手机运行了 更改配置(应用名称、应用图标、启动页...) 打开config.xml 1.更换APP名称 &lt;name&gt;HelloCordova&lt;/name&gt; // app名称 2.更换APP图标(IOS) 安装 cordova-res 裁剪生成图标 npm i -g cordova-res 根目录新建resources文件夹 放入图标跟启动页图片 resources/icon.(png|jpg) 必须至少为1024×1024px resources/splash.(png|jpg) 必须至少为2732×2732px resources/ ├── icon.png └── splash.png config.xml &lt;platform name=&quot;ios&quot;&gt; &lt;icon height=&quot;57&quot; src=&quot;res/iconios/icon-57.png&quot; width=&quot;57&quot; /&gt; &lt;icon height=&quot;114&quot; src=&quot;res/icon/ios/icon-57@2x.png&quot; width=&quot;114&quot; /&gt; &lt;icon height=&quot;40&quot; src=&quot;res/icon/ios/icon-40.png&quot; width=&quot;40&quot; /&gt; &lt;icon height=&quot;80&quot; src=&quot;res/icon/ios/icon-40@2x.png&quot; width=&quot;80&quot; /&gt; &lt;icon height=&quot;50&quot; src=&quot;res/icon/ios/icon-50.png&quot; width=&quot;50&quot; /&gt; &lt;icon height=&quot;100&quot; src=&quot;res/icon/ios/icon-50@2x.png&quot; width=&quot;100&quot; /&gt; &lt;icon height=&quot;60&quot; src=&quot;res/icon/ios/icon-60.png&quot; width=&quot;60&quot; /&gt; &lt;icon height=&quot;120&quot; src=&quot;res/icon/ios/icon-60@2x.png&quot; width=&quot;120&quot; /&gt; &lt;icon height=&quot;180&quot; src=&quot;res/icon/ios/icon-60@3x.png&quot; width=&quot;180&quot; /&gt; &lt;icon height=&quot;72&quot; src=&quot;res/icon/ios/icon-72.png&quot; width=&quot;72&quot; /&gt; &lt;icon height=&quot;144&quot; src=&quot;res/icon/ios/icon-72@2x.png&quot; width=&quot;144&quot; /&gt; &lt;icon height=&quot;167&quot; src=&quot;res/icon/ios/icon-83.5@2x.png&quot; width=&quot;167&quot; /&gt; &lt;icon height=&quot;1024&quot; src=&quot;res/icon/ios/icon-1024.png&quot; width=&quot;1024&quot; /&gt; &lt;/platform&gt; ","link":"https://llllchyi.github.io/cordova-ios-app/"},{"title":"谈谈我为什么要写博客","content":"起因 2020年春节疫情的爆发, 开启了全民坐月子的大规模行动 (毕竟老老实实宅家中是我能为疫情做出的最大贡献了) 每天的日常便是： 打开手机，查看疫情是否好转，最近进展。 偶尔也会跟朋友打打游戏、追番。 生活一停滞，时间久了我就变得异常焦虑，身边了解我的人都知道我其实是一个多虑的人。 我生活中扮演的角色是程序员, 确切的说是不入流的前端开发，因为计算机方面的知识很薄弱, 我是从Android 开发迈入这个行业的, 中途因为公司需要转的前端，为什么是前端呢? 凡是可以用 JavaScript 来写的应用，最终都会用 JavaScript 来写。——Atwood定律(Jeff Atwood在2007年提出) (其实就是节省公司开发成本啦) 更多的时候我是现搜现做(基于搜索引擎编程)， 当然最终项目也能符合公司需求按时交付，毕竟我也是名有态度的调包选手,就这样摸爬滚打到了现在。 现状 2018年加入了现在公司，到现在也将近两年了。2019年底就被Leader叫到办公室, 让我负责整个前端小组, 问我有什么看法? 当时我内心蹦出的第一个念头是: 我想。 其实在过去的一年, 或多或少我都在扮演这个角色，当然以往的我陷入了一个误区，就是把有挑战、有难度的活都揽在手上。把最基本的业务都交给大家, 甚至一个跟我相处时间最长的同事, 我把很多杂事都交给他人处理, 久而久之就把大家的耐心都消失殆尽了。如果换位思考我估计熬不住吧, 写业务半年、一年下来对于成长来说其实是很危险的一件事, 如果让大家都参与项目基建参与较为复杂、有挑战性的工作才会持续保持激情。 随着公司的迅速发展, 前端组成也由最初的两人到如今7人小组, 对于一个初创型公司来说前端占比已经不低了。 当然人手充足了能做的事情也就更多了 Node、数据可视化、组件库、部署规范、增量化发布 这些技术储备对于当前的我们来说是具有挑战性的… 毕竟房子也不是一个人能搭建起来的, 团队共同成长 也就顺水推舟了。 我为什么要写博客? 啰嗦了大半天, 回到主题。 首先长期写博客对于个人来说有坏处吗? 没有! 那写博客的好处呢? 输入重要，输出同样重要。 不去输出，就不知道自己掌握到什么程度。也不知道自己掌握了多少。1 现阶段的我如同我的博客名字&lt;电量不足&gt; 假如如果我连Vue都不太会用, 那还怎么以德服人(毕竟帅不能当饭吃)。 出门在外 碰上手机提示电量不足 想必很多人跟我一样特焦虑。 就如同当前的前端, 发展可以用日新月异来形容。 对我来说摆脱这种焦虑最好的办法就是 时刻给自己充电！ 参考 👇 前端早早聊|Scott - 如何在中小前端团队中完成管理转型 为什么那么多人愿意无偿分享知识？ ","link":"https://llllchyi.github.io/me/"}]}